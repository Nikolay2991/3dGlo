(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,c,a,l,i,u,s,d,f,v,m,p,y;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds"),r=setInterval(a,1e3);function c(e){return e>=0&&e<10?"0".concat(e):e}function a(){var e,a,l,i=(e=(new Date("30 July 2021").getTime()-(new Date).getTime())/1e3,a=Math.floor(e%60),l=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60%24),minutes:l,seconds:a});t.textContent=c(i.hours),n.textContent=c(i.minutes),o.textContent=c(i.seconds),i.timeRemaining<=0&&(t.textContent=c(0),n.textContent=c(0),o.textContent=c(0),clearInterval(r))}a()})(),y=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")||t.classList.contains("close-btn")||t.closest(".active-menu a")?y.classList.toggle("active-menu"):t.closest(".active-menu")||y.classList.remove("active-menu")})),v=document.querySelector(".popup"),m=document.querySelectorAll(".popup-btn"),p=v.querySelector(".popup-content"),window.addEventListener("resize",(function(){f=document.documentElement.clientWidth})),m.forEach((function(e){e.addEventListener("click",(function(){if(v.style.display="block",f>768){var e=100;p.style.top=e+"%",setTimeout((function t(){e--,p.style.top=e+"%",e>10&&setTimeout(t,5)}),5);var t=0;p.style.opacity=0,setTimeout((function e(){t+=.05,p.style.opacity=t,t<1&&setTimeout(e,50)}),50)}}))})),v.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("popup-close")||null===(t=t.closest(".popup-content")))&&(v.style.display="none")})),function(){var t=document.querySelector(".scroll-down");t.addEventListener("click",(function(e){e.preventDefault();var n=t.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}));var n,o=function(t,n){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var r=0,c=function(){};return{s:c,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,i=!1;return{s:function(){o=o.call(t)},n:function(){var e=o.next();return l=e.done,e},e:function(e){i=!0,a=e},f:function(){try{l||null==o.return||o.return()}finally{if(i)throw a}}}}(document.querySelectorAll("ul>li>a"));try{var r=function(){var e=n.value;e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}))};for(o.s();!(n=o.n()).done;)r()}catch(e){o.e(e)}finally{o.f()}}(),u=document.querySelector(".service-header"),s=u.querySelectorAll(".service-header-tab"),d=document.querySelectorAll(".service-tab"),u.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&s.forEach((function(e,n){e===t&&function(e){for(var t=0;t<d.length;t++)e===t?(s[t].classList.add("active"),d[t].classList.remove("d-none")):(s[t].classList.remove("active"),d[t].classList.add("d-none"))}(n)}))})),function(){for(var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots"),r=0,c=0;c<t.length;c++)o.innerHTML+='<li class="dot"></li>';var a=document.querySelectorAll(".dot");a[0].classList.add("dot-active");var l=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},u=function(){l(t,r,"portfolio-item-active"),l(a,r,"dot-active"),++r>=t.length&&(r=0),i(t,r,"portfolio-item-active"),i(a,r,"dot-active")},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(u,t)};n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(l(t,r,"portfolio-item-active"),l(a,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),i(t,r,"portfolio-item-active"),i(a,r,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(1500)}(),document.querySelectorAll(".command__photo").forEach((function(e){e.addEventListener("mouseenter",(function(e){e.target.src=e.target.dataset.img})),e.addEventListener("mouseout",(function(e){e.target.src=e.target.src.replace(/a\./,".")}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelectorAll("input.calc-item");t.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/\D+$/,"")}))}));var n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),l=document.getElementById("total"),i=function(){var t=0,n=1,i=1,u=o.options[o.selectedIndex].value,s=+r.value;a.value>1&&(n+=(a.value-1)/10),c.value&&c.value<5?i*=2:c.value&&c.value<10&&(i*=1.5),u&&s&&(t=e*u*s*n*i),l.textContent=Math.round(t)};n.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&i()}))}(100),c=document.querySelectorAll("input#form1-name, input#form2-name, input#form3-name"),a=document.querySelector("input#form2-message"),l=document.querySelectorAll("input#form1-email, input#form2-email, input#form3-email"),i=document.querySelectorAll("input#form1-phone, input#form2-phone, input#form3-phone"),document.querySelectorAll(".container input").forEach((function(e){e.addEventListener("blur",(function(){e.value=e.value.trim().replace(/^\-+|\-+$/g,""),e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-")}))})),c.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^А-Яа-я\s]+$/g,"")})),e.addEventListener("input",(function(){e.value=e.value.replace(/(\s|^)[а-я]/g,(function(e){return e.toUpperCase()}));var t=e.parentNode.querySelector("#error");1===e.value.length?t||(e.parentNode.insertAdjacentHTML("beforeend",'<div id="error">'.concat("*Имя должно быть больше 1 символа","</div>")),e.parentNode.style.fontSize="12px",e.parentNode.style.color="red",e.style.cssText="border: 2px solid red;"):(0===e.value.length||e.value.length>1)&&(e.style.cssText="background-color: #fff; color: #000",t&&e.parentNode.querySelector("#error").remove())}))})),l.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^A-Za-z0-9\@\-\_\.\!\~\*\']+$/,""),e.value=e.value.trim().replace(/\s+/g,"")})),e.addEventListener("blur",(function(){var t,n=e.parentNode.querySelector("#error");t=e.value,/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||""===e.value?(e.style.cssText="background-color: #fff; color: #000",n&&e.parentNode.querySelector("#error").remove()):n||(e.parentNode.insertAdjacentHTML("beforeend",'<div id="error">'.concat("*Не корректный e-mail адрес","</div>")),e.parentNode.style.fontSize="12px",e.parentNode.style.color="red",e.style.cssText="border: 2px solid red;")}))})),i.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^0-9\+]+$/g,"")})),e.addEventListener("input",(function(){var t=e.parentNode.querySelector("#error");e.value.length>0&&e.value.length<7||e.value.length>11?t||(e.parentNode.insertAdjacentHTML("beforeend",'<div id="error">'.concat("*Укажите от 7 до 11 цифр","</div>")),e.parentNode.style.fontSize="12px",e.parentNode.style.color="red",e.style.cssText="border: 2px solid red;"):(0===e.value.length||e.value.length>=7&&e.value.length<=11)&&(e.style.cssText="background-color: #fff; color: #000",t&&e.parentNode.querySelector("#error").remove())}))})),a.addEventListener("input",(function(){a.value=a.value.replace(/[^А-Яа-я0-9 .,\\/#!$%\^&\*;:{}=\-_`~()]+$/g,"")})),t="Что-то пошло не так...",n='<img src="images/loader.gif" alt="loader" style="height: 25px; width: 25px;">',o=document.querySelectorAll("#form1,#form2,#form3"),(r=document.createElement("div")).style.cssText="font-size: 2rem; color: #fff",o.forEach((function(e){e.addEventListener("submit",(function(o){if(o.preventDefault(),document.querySelector("#error"))e.appendChild(r),r.innerHTML=n,r.textContent=t,setTimeout((function(){r.textContent=""}),2e3);else{e.appendChild(r),r.innerHTML=n;var c=new FormData(e),a={};c.forEach((function(e,t){a[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}(a).then((function(e){if(200!==e.status)throw new Error("status network not 200");r.textContent="Спасибо! Мы скоро с вами свяжемся.",setTimeout((function(){r.textContent="",document.querySelector(".popup").style.display="none"}),2e3)})).catch((function(e){r.textContent=t,setTimeout((function(){r.textContent=""}),2e3)})),e.querySelectorAll("input").forEach((function(e){e.value=""}))}}))}))})();